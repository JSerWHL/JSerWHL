<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Register</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <style>
        body{
            text-align: center;
            background-color: #15171E
        }
        input[type='submit'],a{
        }
        #warp {   
        position: absolute;   
        width:500px;   
        height:200px;   
        left:50%;   
        top:50%;   
        margin-left:-250px;   
        margin-top:-100px;   
        border: solid 3px rgba(255, 0, 0, 0);   
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
</head>
<body>
    <div id=warp>
        <h1 style="color:rgb(255, 255, 255);" font-family:"微軟雅黑">修改密码界面<span class="badge badge-secondary" style="color:rgb(255, 255, 255);font-size:15px;">New</span></h1>
        ""
        <div style="line-height: 100%;">
            <form action="http://localhost:30010/register">
                <!-- 旧密码栏 -->
                <div class="input-group mb-3">
                    <input type="text" name="name" id="name" class="form-control" placeholder="输入您的旧密码" 
                    required="密码不能为空" pattern="^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$" 
                    style="height:50px;" aria-label="Recipient's username" aria-describedby="basic-addon2" onkeyup="checkname()"><br><br>          
                </div>

                <!-- 建立新密码栏 -->
                <div class="input-group mb-3">
                    <input type="text" name="pwd" id="pw1" class="form-control" placeholder="設置你的新密码（必须包含字母和数字，在6-18位之间）" 
                    required="密码不能为空" pattern="^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$" 
                    style="height:50px;" aria-label="Recipient's username" aria-describedby="basic-addon2" onkeyup="checkpass()"><br><br>          
                    <div class="input-group-append">
                      <span class="input-group-text" id="tip2" >❌</span>
                    </div>
                </div>

                <!-- 确认密码栏 -->
                <div class="input-group mb-3">
                    <input type="text" name="repwd" id="pw2" class="form-control" placeholder="确认你的密码" 
                    required="密码不能为空" pattern="^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$"  
                    style="height:50px;" aria-label="Recipient's username" aria-describedby="basic-addon2" onkeyup="checkrepass()"><br><br>          
                    <div class="input-group-append">
                      <span class="input-group-text" id="tip3">❌</span>
                    </div>
                </div>
                <!-- 修改密码按钮 -->
                <input type="submit" id="submit" class="btn btn-primary btn-lg btn-block" data-toggle="modal" data-target="#exampleModal" value="修改密码">
                <!-- 返回按钮 -->
                <a class="btn btn-secondary btn-lg btn-block" href="user.html">返回个人资料</a>
            </form>
        </div>
    </div>
</body>

<script>
    //账号名验证
    document.getElementById("submit").disabled = true;
    function checkname() {
        var name = document.getElementById("name").value;
        if(name.length < 3 || name.length > 10) {
            document.getElementById("tip1").innerHTML="<font color='green'>❌</font>";
            //document.getElementById("submit").disabled = true;
        }
        else {
            document.getElementById("tip1").innerHTML="<font color='red'>✔</font>";
            //document.getElementById("submit").disabled = false;
        }
    }

    //密码验证
    function checkpass() {
        var pw1 = document.getElementById("pw1").value;
        var reg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/;
        if(pw1.length < 6 || pw1.length > 18 || !reg.test(pw1)) {
            document.getElementById("tip2").innerHTML="<font color='green'>❌</font>";
            //document.getElementById("submit").disabled = true;
        }
        else {
            document.getElementById("tip2").innerHTML="<font color='red'>✔</font>";
            //document.getElementById("submit").disabled = false;
        }
    }

    //确认密码验证
    function checkrepass() {
        var pw1 = document.getElementById("pw1").value;
        var pw2 = document.getElementById("pw2").value;
        if(pw1 == pw2) {
            document.getElementById("tip3").innerHTML="<font color='green'>✔</font>";
            document.getElementById("submit").disabled = false;
        }
        else {
            document.getElementById("tip3").innerHTML="<font color='red'>❌</font>";
            document.getElementById("submit").disabled = true;
        }
    }
</script>
</html>